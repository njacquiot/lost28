<html>
<head>

<style>

	#useVerb { width:15%; float: right; }
	#useNoun { width:20%; float: right; }

</style>

<script src="/jquery.min.js"></script>

<script>

$(document).ready( function() {

//JSON Data
	let data =
	[
	  {
	    "world": "Harry Potter",
	    "rooms": [
	      "Chamber of secrets",
	      "Forbidden forest",
	      "Poudlard"
	    ],
			"score" : 0
	  }
	];

	let question =
	[
		{
			"verbs": [
				"DESCRIBE",
				"SAY",
				"TAKE",
				"USE",
				"OPEN",
				"FIND",
				"READ",
				"MOVE FORWARD",
				"MOVE BACKWARD",
			],
			"nouns":[
				"ROOM",
				"WAND",
				"BOX",
				"KEY",
				"DOOR",
				"BOOK"
			]
		}
	];


let Poudlard =
[
		{
			"description" : "</br>You are in a bigest room of the castle, it seems to be in a classroom,"+
			" I see lot's of painting on the wall, I see one door behind you but I can't see the bottom of the room the light is off."+
			" There are tables with teaching books, papers and potions",			"decription" : "You are in a bigest room of the castle, it seems to be in a classroom,",
		}

];

	let read =
	[
		{
		}
	];



	//Game is on
	let gameIsRunning = true;

	for(i = 0; i<question[0].verbs.length; i++){
		$('#useVerb').append("<li>"+question[0].verbs[i]+"</li>");
	}

	for(i = 0; i<question[0].nouns.length; i++){
		$('#useNoun').append("<li>"+question[0].nouns[i]+"</li>");
	}


	$.getJSON( "/data.json", function( data2 ) {
		console.log("3lkjfqdslkjfdskl" + data2);
	});


	//One world and a random room to start
	$('#status').append( 'Your are in ' + data[0].world + ' world');


	// Save string to localStorage
	localStorage.setItem('myWorld',data[0].world);

	let rand = Math.floor(Math.random()*3);
	//localStorage.setItem('myRoom',data[0].rooms[rand]);
	localStorage.setItem('myRoom',data[0].rooms[2]); //TT le temps Poudlard pour l'instant
	$('#status').append('<br/>You are now in the room ' + data[0].rooms[rand] + ' and you have ' + data[0].score + ' point');


		//Confirm your character
		$('#enterBtn').click( ()=>{
			localStorage.setItem('myChar', $('#userName').val().toUpperCase());
			$('#character').html('Welcome to ' + localStorage.getItem('myRoom') + " " + localStorage.getItem('myChar'));
			$('#instructions').show();
		});

		$('#userName').keyup(  function(e){
			if (e.keyCode == 13){
				localStorage.setItem('myChar', $('#userName').val().toUpperCase());
				$('#character').html('Welcome to ' + localStorage.getItem('myRoom') + " " + localStorage.getItem('myChar'));
				$('#instructions').show();


			}
		});

		$('#understand').click( ()=>{

			$('#understand').hide();

			$("#dumbledore").append("Hello " + localStorage.getItem('myChar') + ", I'm Dumbledore nice to meet you. " + localStorage.getItem('myRoom') + " is a huge place, hope you won't be lost ! How can I help you ?");
			$('#questions').show();

			$("#send").click( ()=>{

				switch ($('#Verb').val().toUpperCase()) {
					case question[0].verbs[0]: //describe
						$('#game').append("</br>Well, I will tell you what I see !");
						switch ($('#Noun').val().toUpperCase()) {
							case question[0].nouns[0]:
									$('#game').append(Poudlard[0].description);
								break;
							default:
								$('#game').append("</br>Sorry I don't undestand what you want");

						}

						break;
					case question[0].verbs[1]: //Say
						$('#game').append("</br>"+$('#Noun').val());
						break;
					case question[0].verbs[2]: //take
						$('#game').append("</br>Alright I took the "+ $('#Noun').val() + "you can use it whenever you want");
						break;
					case question[0].verbs[3]: //use
						$('#game').append("</br>Let's try !");
						break;
					case question[0].verbs[4]: //open
						$('#game').append("</br>The " + $('#Noun').val() + "is now open");
						break;
					case question[0].verbs[5]: //find
						$('#game').append("</br>Oh interesting I found the " + $('#Noun').val());
						break;
					case question[0].verbs[6]: //read
						$('#game').append("</br>One second, I took my glasses... It says : ");
						break;
					case question[0].verbs[7]: //move forward
						$('#game').append("</br>Let's go Forward !");
						break;
					case question[0].verbs[8]: //move backward
						$('#game').append("</br>Half tour !");
						break;
					default:
						$('#game').append("</br>Sorry I don't undestand your verb");




				}
				/*
				if ($('#Verb').val().toUpperCase() == question[0].verbs[0]){
					$('#game').append("</br>Well, I will tell you what I see !");



					if ($('#Noun').val().toUpperCase() == question[0].nouns[0]){
						if(localStorage.getItem('myRoom') == data[0].rooms[2]){
							$('#game').append("</br>You are in a big room, there are lot's of table and chair, you seem to be in a classroom, I see lot's of painting on the wall, I see two doors one in front and one behind.</br>");
							$('#Verb').val('');
							$('#Noun').val('');
						}
					}
				}*/
			});


		});


});

</script>

<title>Lost Game</title>
<style>

</style>


</head>
<body>

	<div id = "useNoun">
		<p>Nouns understandable by Dumbledore</p>
	</div>

	<div id = "useVerb">
		<p>Verbs understandable by Dumbledore</p>
	</div>

		<h1>Lost Game</h1>

	    <p>Welcome to the game</p>
			<div id ="status"></div>

		<div id = "character">
			<p>You can now enter your name</p>
			<input type="text" id="userName"></input>
			<button type="button" id="enterBtn">ENTER</button>
		</div>
		<div id ="instructions"  style="display: none">

		</br></br>The game can start !! Instructions are simple : </br></br>
	<p>	You are in one room of the game but there are other places and you have to undestand how you can go out ! </br>The goal is to understand your room in order to leave, the more you understand the more points you will have !! </br>
		You can talk to Dumbledore with a simple combinaison of a <b>Noun</b> and a <b>Verb</b> that he can understand, Enjoy :)</br></p>
	<button type="button" id="understand">UNDERSTAND</button>



		</div>

		<div id ="dumbledore"></div>

		<div id = "Poudlard">

			<div id = "room">

			</div>

		</div>


		<div id ="game"></div>
		<div id = "questions" style="display: none">
		<input id ="Verb" type ="text" placeholder="Verb"/>
		<input id ="Noun" type="text" placeholder="Noun"/>
		<button id ="send">Send</button>
		</div>




</body>
</html>
